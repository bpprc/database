/*! MoonMap - v0.0.1 | http://opensource.org/licenses/MIT */
;MoonMap=function(t,i){this.moons=[],this.lastRotation=0,this.selector=t,this.currentlyActive=-1,"object"!=typeof i&&(i={});var o={active:function(){},activeClass:"active",content:"",degrees:360,margin:0,moonClass:"moon",n:12,radius:!1,removeOriginal:!0,startAngle:90};if(this.extend=function(t,i){for(var o in i)i.hasOwnProperty(o)&&(t[o]=i[o]);return t},"undefined"==typeof t)return void console.error("No query selector was provided to the MoonMap constructor");var e=document.querySelector(t);this.options=this.extend(o,i),this.map=e,this.makeAbsolute=function(t){return'<div style="position:relative"><div class="_moon_content" style="position:absolute;width:100%;height:100%">'+t+"</div></div>"},this.options.radius||(this.options.radius=e.offsetWidth+this.options.margin);var s=parseInt(e.offsetWidth/2);if("undefined"!=typeof this.options.moonSelector)for(var n=document.querySelectorAll(this.options.moonSelector),r=n.length,a=360/r,h=360-this.options.startAngle,l=0;r>l;++l){var c=document.createElement("div"),p=n[l].cloneNode(!0),u=Math.sin(h*(Math.PI/180))*this.options.radius,v=Math.cos(h*(Math.PI/180))*this.options.radius;c.className=this.options.moonClass,c.style.position="absolute",c.style.visibility="hidden",c.innerHTML=this.makeAbsolute(p.outerHTML),e.appendChild(c);var d=c.offsetWidth/2,f=s-d;c.style.top=(u+f).toString()+"px",c.style.left=(v+f).toString()+"px",c.style.visibility="visible",this.options.removeOriginal&&n[l].parentNode.removeChild(n[l]),this.moons.push(c),h+=a}else for(var r=this.options.n,a=360/r,h=360-this.options.startAngle,l=1;l<=this.options.n;++l){var c=document.createElement("div"),u=Math.sin(h*(Math.PI/180))*this.options.radius,v=Math.cos(h*(Math.PI/180))*this.options.radius;c.className=this.options.moonClass,c.style.position="absolute",c.style.visibility="hidden","function"==typeof this.options.content?c.innerHTML=this.makeAbsolute(this.options.content(l,c)):this.options.content&&(c.innerHTML=this.makeAbsolute(this.options.content)),e.appendChild(c);var d=c.offsetWidth/2,f=s-d;c.style.top=(u+f).toString()+"px",c.style.left=(v+f).toString()+"px",c.style.visibility="visible",this.moons.push(c),h+=a}this.moonEvent=function(t,i){for(var o=this,e=0;e<this.moons.length;e++)this.moons[e].addEventListener(t,function(){i(this,o)})},this.rotateMoons=function(t,i){"undefined"==typeof t&&(t=90),"undefined"==typeof i&&(i=1e3);{var o=i/1e3,e=["-webkit-","-moz-","-o-","-ms-",""];this.lastRotation+t}this.lastRotation=t;for(var s=0;s<e.length;s++){var n=e[s];this.map.style[n+"transition"]="all "+o+"s ease-in-out",this.map.style[n+"transform"]="rotate("+t+"deg)"}},this.current=function(){return this.currentlyActive},this.next=function(){var t=this.currentlyActive+1;return t>this.moons.length-1&&(t=0),t},this.previous=function(){return prevActive=this.currentlyActive-1,"undefined"==typeof this.moons[prevActive]&&(prevActive=this.moons.length-1),prevActive},this.startCarousel=function(t){"undefined"==typeof t&&(t=1200);var i=this,o=this.options;setInterval(function(){var t=i.moons,e=i.current(),s=i.next();i.currentlyActive=s,"undefined"!=typeof t[e]&&(t[e].className="moon"),t[s].className=t[s].className+" "+o.activeClass,"function"==typeof o.active&&o.active(i)},t)}};
