{% load i18n admin_urls %}
{% load static %}

<style>

label.required { color: red; }

</style>

<div class="submit-row">
{% block submit-row %}
{% if show_save %}<input type="submit" value="{% trans 'Save' %}" class="default" name="_save">{% endif %}
{% if show_delete_link and original %}
    {% url opts|admin_urlname:'delete' original.pk|admin_urlquote as delete_url %}
    <p class="deletelink-box"><a href="{% add_preserved_filters delete_url %}" class="deletelink">{% trans "Delete" %}</a></p>
{% endif %}
<input class="databox" type="button" value="Copy to Public Database" name="_saveasnew">


{% if show_close %}<a href="{% url opts|admin_urlname:'changelist' %}" class="closelink">{% trans 'Close' %}</a>{% endif %}
{% endblock %}
</div>

{% block extrajs %}

<script type="text/javascript" src="{% static 'database/js/sweetalert.min.js' %}"> </script>

<script>

moveName=localStorage.getItem('name');
// moveOldname=localStorage.getItem('oldname');
moveSeq=localStorage.getItem('sequence');
moveAccession=localStorage.getItem('accession');
if (moveName) {
    document.getElementById("id_name").value = moveName;
    // document.getElementById("id_oldname").value = moveOldname;
    document.getElementById("id_sequence").value = moveSeq;
    document.getElementById("id_accession").value = moveAccession;
    localStorage.clear()
  }

</script>

<script>

document.body.addEventListener('click', function (evt) {
    if (evt.target.className === 'databox') {
      swal("Are you sure? This data will be visible to the public?", {
        buttons: {
          cancel: "No!",
          catch: {
            text: "Yes!",
            value: "move",
          },
        },
      })
      .then((value) => {
        switch (value) {

          case "move":

            const name=document.getElementById('id_name').value;
            // const oldname=document.getElementById('id_oldname').value;
            const accession=document.getElementById('id_accession').value;
            const sequence=document.getElementById('id_sequence').value;

            localStorage.setItem('name', name);
            // localStorage.setItem('oldname', oldname);
            localStorage.setItem('sequence', sequence);
            localStorage.setItem('accession', accession);
            window.location = "/admin/database/pesticidalproteindatabase/add/";
            break;

          default:
            swal("Okay!");
        }
      });
    }
}, false);

</script>

{% endblock extrajs %}
